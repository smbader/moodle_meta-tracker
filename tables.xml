<?xml version="1.0" encoding="UTF-8"?>
<database>
  <table name="users">
    <column name="id" type="INT" autoincrement="true" primary="true" />
    <column name="email" type="VARCHAR(255)" notnull="true" unique="true" />
    <column name="password_hash" type="VARCHAR(255)" notnull="true" />
    <column name="fullname" type="VARCHAR(255)" notnull="true" />
  </table>
  <table name="coworkers">
    <column name="id" type="INT" autoincrement="true" primary="true" />
    <column name="user_id" type="INT" notnull="true" />
    <column name="fullname" type="VARCHAR(255)" notnull="true" />
    <column name="email" type="VARCHAR(255)" notnull="true" />
    <column name="github_handle" type="VARCHAR(255)" notnull="true" />
  </table>
  <table name="saved_issues">
    <column name="id" type="INT" autoincrement="true" primary="true" />
    <column name="user_id" type="INT" notnull="true" />
    <column name="keyname" type="VARCHAR(255)" notnull="true" />
    <column name="pull_from_repository" type="TEXT" />
    <column name="pull_main_diff_url" type="TEXT" />
    <column name="pull_main_branch" type="TEXT" />
  </table>
  <table name="config">
    <column name="id" type="INT" autoincrement="true" primary="true" />
    <column name="user_id" type="INT" notnull="true" />
    <column name="name" type="VARCHAR(64)" notnull="true" />
    <column name="value" type="TEXT" />
    <unique name="user_config_unique">
      <column name="user_id" />
      <column name="name" />
    </unique>
  </table>
  <!-- New table for local issue tracking -->
  <table name="issues">
    <column name="id" type="INT" autoincrement="true" primary="true" />
    <column name="jira_key" type="VARCHAR(64)" notnull="true" unique="true" />
    <column name="title" type="VARCHAR(255)" />
    <column name="desc" type="TEXT" />
    <column name="internal_status_id" type="INT" />
    <column name="notes" type="TEXT" />
  </table>
  <!-- Many-to-many relationship between issues and coworkers -->
  <table name="issue_coworkers">
    <column name="id" type="INT" autoincrement="true" primary="true" />
    <column name="issue_id" type="INT" notnull="true" />
    <column name="coworker_id" type="INT" notnull="true" />
    <unique name="issue_coworker_unique">
      <column name="issue_id" />
      <column name="coworker_id" />
    </unique>
  </table>
  <!-- Internal statuses table -->
  <table name="statuses">
    <column name="id" type="INT" autoincrement="true" primary="true" />
    <column name="user_id" type="INT" notnull="true" />
    <column name="name" type="VARCHAR(64)" notnull="true" />
    <column name="sort_order" type="INT" notnull="true" />
    <unique name="user_status_unique">
      <column name="user_id" />
      <column name="name" />
    </unique>
  </table>
</database>
